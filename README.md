# chat-websocket
чат на вебсокетах

## Структура проекта
```
chat_app/
├── app/
│   ├── __init__.py
│   ├── main.py          # Точка входа
│   ├── models.py        # Модели SQLAlchemy
│   ├── schemas.py       # Pydantic-схемы
│   ├── crud.py          # CRUD-операции
│   ├── dependencies.py  # Зависимости FastAPI
│   ├── websocket.py     # Логика WebSocket
│   └── auth.py          # Аутентификация
├── tests/               # Тесты pytest
├── alembic/             # Миграции
├── config.py            # Настройки
└── requirements.txt
```

## План
- [ ]бд
    - [x] Подключение
    - [x] Модели 
        - [x] User
        - [x] Room
        - [x] Message
    - [ ] Миграции Alembic
- [ ] Auth
	- [x] Хеширование пароля
	- [ ] JWT
	- [ ] Создать эндпоинты /login и /register
	- [ ] Проверка через Depends. 
	- [ ] Запретить доступ к WebSocket без авторизации
- [ ] WS
- [ ] Логика чата
	- [ ] Реализовать CRUD для комнат и сообщений
	- [ ] Добавить сохранение сообщений в БД
	- [ ] Реализовать отправку сообщений всем в комнате
	- [ ] Добавить обработку системных сообщений (вход/выход)
- [ ] Тестирование
	- [ ] Написать unit-тесты для CRUD-операций
	- [ ] Протестировать WebSocket-взаимодействия
	- [ ] Проверить работу аутентификации
	- [ ] Написать интеграционные тесты
- [ ] Документация
	- [ ] Автоматически сгенерировать Swagger
	- [ ] Добавить описание всех эндпоинтов
	- [ ] Протестировать через ReDoc

## Улучшения (для продвинутого изучения)
- [ ] Добавить Docker для контейнеризации
- [ ] Использовать Redis для кэширования активных пользователей
- [ ] Добавить Celery для фоновых задач (очистка старых сообщений)
- [ ] Реализовать веб-интерфейс на React/Vue
- [ ] Добавить валидацию данных через Pydantic v2
- [ ] Настроить логирование запросов
- [ ] Добавить обработку ошибок через middleware
- [ ] Использовать BackgroundTasks для асинхронных операций
- [ ] Добавить rate limiting
- [ ] Настроить мониторинг с Prometheus/Grafana
- [ ] Добавить поддержку файловых вложений
- [ ] Реализовать приватные комнаты
- [ ] Добавить систему ролей (admin/moderator)
- [ ] Настроить CI/CD пайплайн
- [ ] Использовать WebSocket compression
- [ ] Добавить тесты на нагрузку (locust)
- [ ] Настроить Sentry для отслеживания ошибок
- [ ] Добавить конфигурацию через .env файлы
- [ ] Реализовать механизм подтверждения email
- [ ] Добавить WebSocket heartbeat
- [ ] Использовать Server-Sent Events (SSE) для уведомлений
- [ ] Настроить кластеризацию WebSocket-серверов
- [ ] Добавить поддержку markdown в сообщениях
- [ ] Реализовать историю сообщений в реальном времени
- [ ] Добавить интеграцию с внешними API
- [ ] Настроить автоматические миграции при деплое


Сделал прослойку сервис - репозиторий - круд
надо нормально перенести гет куррент юзер в сервис